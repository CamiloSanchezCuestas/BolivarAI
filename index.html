<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>BolivarAI</title>
  <style>
    body{font-family:system-ui,Segoe UI,Roboto,Arial;margin:24px;background:#f4f4f4}
    .card{background:#fff;padding:14px;border-radius:8px;box-shadow:0 6px 18px rgba(0,0,0,0.06);max-width:760px;margin:0 auto}
    textarea{width:100%;height:120px;padding:8px;font-size:14px}
    button{padding:10px 14px;border-radius:6px;border:0;background:#111;color:#fff;cursor:pointer}
    pre{white-space:pre-wrap;background:#0f1720;color:#e6fffa;padding:12px;border-radius:6px;overflow:auto}
    .row{display:flex;gap:8px;align-items:center}
    small{color:#555}
  </style>
</head>
<body>
  <div class="card">
    <h2>Chat BolivarAI</h2>
    <p>Escribe tu pregunta y pulsa <strong>Enviar</strong>. Este HTML es solo la UI.</p>

    <label for="prompt">Prompt</label>
    <textarea id="prompt">Hola, explícame la regla del fuera de juego en 3 líneas.</textarea>

    <div class="row" style="margin-top:8px">
      <button id="send">Enviar</button>
      <button id="clear">Borrar</button>
      <small id="status">Listo</small>
    </div>

    <h4>Respuesta</h4>
    <pre id="response">(aún no hay respuesta)</pre>

    <details style="margin-top:12px">
      <summary>Cómo funciona (rápido)</summary>
      <ol>
        <li>El front envía POST a <code>/api/chat</code> con JSON <code>{ prompt }</code>.</li>
        <li>Tu servidor debe recibir eso y llamar al modelo (Ej: OpenAI) y devolver JSON <code>{ reply }</code>.</li>
      </ol>
    </details>

  </div>

  <script>
    const sendBtn = document.getElementById('send');
    const clearBtn = document.getElementById('clear');
    const promptEl = document.getElementById('prompt');
    const respEl = document.getElementById('response');
    const statusEl = document.getElementById('status');

    async function postToServer(prompt) {
      // Punto de extensión: cambia la URL si tu endpoint es distinto
      const url = '/api/chat';
      statusEl.textContent = 'Enviando...';
      try {
        const res = await fetch(url, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ prompt })
        });
        if (!res.ok) {
          const text = await res.text();
          throw new Error('Error del servidor: ' + res.status + ' - ' + text);
        }
        const data = await res.json();
        // Se espera { reply: 'texto' }
        respEl.textContent = data.reply ?? JSON.stringify(data, null, 2);
        statusEl.textContent = 'Hecho';
      } catch (err) {
        respEl.textContent = 'ERROR: ' + (err.message || err);
        statusEl.textContent = 'Error';
      }
    }

    sendBtn.addEventListener('click', () => {
      const prompt = promptEl.value.trim();
      if (!prompt) return alert('Escribe algo.');
      postToServer(prompt);
    });

    clearBtn.addEventListener('click', () => {
      promptEl.value = '';
      respEl.textContent = '(aún no hay respuesta)';
      statusEl.textContent = 'Listo';
    });

    // --- Opcional: ejemplo rápido de servidor Node.js (comentado)
    // Si no tienes backend, crea un archivo server.js con el siguiente contenido:
    /*
    // server.js (ejemplo muy simple con Express)
    const express = require('express');
    const fetch = require('node-fetch'); // o global fetch en Node 18+
    const app = express();
    app.use(express.json());
    app.post('/api/chat', async (req, res) => {
      const prompt = req.body.prompt || '';
      // Aquí deberías llamar a la API de OpenAI o a tu modelo.
      // Este ejemplo devuelve una respuesta ficticia.
      res.json({ reply: 'Respuesta simulada para: ' + prompt });
    });
    app.listen(3000, ()=>console.log('Listening on http://localhost:3000'));
    */

    // Nota: no incluyas claves de API en el código cliente. Si quieres usar OpenAI desde el servidor,
    // haz la llamada desde tu servidor (server.js) y no desde este HTML.
  </script>
</body>
</html>
